{% extends "base.html" %} {% block title %}Home{% endblock %} {% block content
%}
<h2 class="tekst">Catalogus</h2>

<div class="main">
  <!-- Search bar -->
  <form method="POST" class="searchForm">
    <input type="hidden" name="csrf_token" value="{{ csrf_token() }}" />
    <input type="hidden" name="form_name" value="search" />
    <div class="input-group rounded" id="searchBar">
      <input
        type="search"
        class="form-control rounded"
        placeholder="Search"
        aria-label="Search"
        aria-describedby="search-addon"
        name="search"
      />
      <button type="submit" class="btn btn-primary" id="search-addon">
        <i class="bi bi-search" id="searchicon"></i>
      </button>
    </div>
  </form>

  <!-- Filters -->
  <section class="filters">
    <form method="POST" id="filterForm" class="mb-3">
      <input type="hidden" name="csrf_token" value="{{ csrf_token() }}" />
      <input type="hidden" name="form_name" value="sorteer" />
      <div class="azForm">
        <label for="btn-check-outlined-themes-AZ">Sorteer:</label>
        <div class="on-off-checkmark">
          <input type="checkbox" data="baseball" id="AZ" name="AZ" value="AZ" {%
          if sortItems and "AZ" in sortItems %} checked {% endif %} />
          <label for="AZ">AZ</label>
        </div>
        <div class="on-off-checkmark">
          <input type="checkbox" data="basketball" id="ZA" name="AZ" value="ZA"
          {% if sortItems and "ZA" in sortItems %} checked {% endif %} />
          <label for="ZA">ZA</label>
        </div>
      </div>

      <!-- Category -->
      <label><span style="font-weight: bold">Categorie:</span></label
      ><br />
      <div class="on-off-checkmark">
        <input type="checkbox" id="Audio" name="category" value="Audio" {% if
        'Audio' in selected_categories %} checked {% endif %}/>
        <label for="Audio">Audio</label>
      </div>
      <div class="on-off-checkmark">
        <input type="checkbox" id="Belichting" name="category"
        value="Belichting" {% if 'Belichting' in selected_categories %} checked
        {% endif %}/>
        <label for="Belichting">Belichting</label>
      </div>
      <div class="on-off-checkmark">
        <input type="checkbox" id="Elektronica" name="category"
        value="Elektronica" {% if 'Elektronica' in selected_categories %}
        checked {% endif %}/>
        <label for="Elektronica">Elektronica</label>
      </div>
      <div class="on-off-checkmark">
        <input type="checkbox" id="Video" name="category" value="Video" {% if
        'Video' in selected_categories %} checked {% endif %}/>
        <label for="Video">Video</label>
      </div>
      <div class="on-off-checkmark">
        <input type="checkbox" id="Varia" name="category" value="Varia" {% if
        'Varia' in selected_categories %} checked {% endif %}/>
        <label for="Varia">Varia</label>
      </div>
      <hr />

      <!-- Merk -->
      <label><span style="font-weight: bold">Merk:</span></label
      ><br />

      <div class="on-off-checkmark">
        <input type="checkbox" id="Apple" name="merk" value="Apple" {% if
        'Apple' in selected_merk %} checked {% endif %}/>
        <label for="Apple">Apple</label>
      </div>
      <div class="on-off-checkmark">
        <input type="checkbox" id="Arduino" name="merk" value="Arduino" {% if
        'Arduino' in selected_merk %} checked {% endif %}/>
        <label for="Arduino">Arduino</label>
      </div>
      <div class="on-off-checkmark">
        <input type="checkbox" id="Canon" name="merk" value="Canon" {% if
        'Canon' in selected_merk %} checked {% endif %}/>
        <label for="Canon">Canon</label>
      </div>
      <div class="on-off-checkmark">
        <input type="checkbox" id="Bresser" name="merk" value="Bresser" {% if
        'Bresser' in selected_merk %} checked {% endif %}/>
        <label for="Bresser">Bresser</label>
      </div>
      <div class="on-off-checkmark">
        <input type="checkbox" id="Rode" name="merk" value="Rode" {% if 'Rode'
        in selected_merk %} checked {% endif %}/>
        <label for="Rode">Rode</label>
      </div>
      <hr />

      <!-- Type Product -->
      <label><span style="font-weight: bold">Type:</span></label
      ><br />
      <div class="on-off-checkmark">
        <input type="checkbox" id="enkelProduct" name="Type_product"
        value="enkel_product" {% if 'enkel_product' in selected_type %} checked
        {% endif %}/>
        <label for="enkelProduct">enkel product</label>
      </div>
      <div class="on-off-checkmark">
        <input type="checkbox" id="productSet" name="Type_product" value="set"
        {% if 'set' in selected_type %} checked {% endif %}/>
        <label for="productSet">set</label>
      </div>
      <div class="on-off-checkmark">
        <input type="checkbox" id="productAccessoire" name="Type_product"
        value="accessoire" {% if 'accessoire' in selected_type %} checked {%
        endif %}/>
        <label for="productAccessoire">accessoires</label>
      </div>
      <hr />

      <!-- Filteren op datum -->
      <label for="datums">Filter op datum:</label>
      <input
        class="form-control selecteerDatum"
        type="datetime-local"
        id="datums"
        name="datums"
        value="{{ datums }}"
      />
      <br />
      <button
        type="submit"
        name="form_name"
        value="sorteer"
        class="btn btn-primary"
      >
        Filter
      </button>
    </form>
  </section>

  <!-- catalogus -->
  <section class="catalogus">
    {% if artikels %} {% for artikel in artikels %}

    <div
      class="card {% if artikel.id in unavailable_article_ids %}unavailable{% endif %}"
      data-toggle="modal"
      data-target="#myModal{{ loop.index }}"
      data-title="{{ artikel.title }}"
      data-img="{{ url_for('static', filename='images/'+artikel.afbeelding) }}"
      data-desc="{{ artikel.beschrijving }}"
      data-brand="{{ artikel.merk }}"
    >
      <!-- Content van het artikel -->
      <div class="cardcontent">
        <div class="cardimg">
          <img
            src="{{ url_for('static', filename='images/'+artikel.afbeelding) }}"
            class="card-img-top"
            alt="afbeelding"
          />
        </div>

        <div class="card-body">
          {% if artikel.id in unavailable_article_ids %}
          <div class="unavailable-overlay">
            <h6 class="unavailable-text">Niet beschikbaar</h6>
          </div>
          {% endif %}
          <h5 class="card-title">{{ artikel.title }}</h5>
          <p class="card-text">{{ artikel.merk }}</p>
          <p class="card-text">{{ artikel.nummer }}</p>
          <p class="card-text">{{ artikel.category }}</p>
          <form method="POST" class="datumForm">
            <input type="hidden" name="csrf_token" value="{{ csrf_token() }}" />
            <div class="datumReserveer">
              <input class="form-control selecteerDatum card-button"
              type="datetime-local" placeholder="Selecteer datums"
              name="datepicker" data-item-id="{{ artikel.id }}" data-user-id="{{
              user.type_id }}" data-is-multiple="{{ is_multiple_dict[artikel.id]
              }}" data-amount={{ artikel.nummer }}"">

              <input type="hidden" name="form_name" value="reserveer" />
              <input type="hidden" name="artikel_id" value="{{ artikel.id }}" />
              <button
                type="submit"
                class="btn btn-primary submitBtn card-button"
              >
                Reserveer
              </button>
            </div>
          </form>
        </div>
      </div>
    </div>
    <!-- Modal voor het artikel -->
    <div
      class="modal fade myModal"
      id="myModal{{ loop.index }}"
      tabindex="-1"
      role="dialog"
      aria-labelledby="myModalLabel"
      aria-hidden="true"
    >
      <div class="modal-dialog" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="myModalLabel"></h5>
            <button
              type="button"
              class="close"
              data-dismiss="modal"
              aria-label="Close"
            >
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div class="modal-body">
            <div class="modal-left">
              <img class="modal-img" src="" alt="Image" />
              <h6>Merk:</h6>
              <p class="modal-brand"></p>
            </div>
            <div class="modal-right">
              <h6>Beschrijving:</h6>
              <p class="modal-desc"></p>
            </div>
          </div>
          <div class="modal-footer">
            <button
              type="button"
              class="btn btn-secondary"
              data-dismiss="modal"
            >
              Close
            </button>
          </div>
        </div>
      </div>
    </div>
    <!-- Als er geen artikels gevonden zijn voor de zoekopdracht -->
    {% endfor %} {% elif not artikels %}
    <h2>Geen artikels gevonden die voldoen aan de criteria.</h2>
    {% endif %}
  </section>
</div>
{% endblock %}
